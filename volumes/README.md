# Docker Volumes

Volumes are the preferred mechanism for persisting data generated by and used by Docker containers. While bind mounts are dependent on the directory structure of the host machine, volumes are completely managed by Docker. (Read more https://docs.docker.com/storage/volumes/)

Try it out
--
1. Start by listing what volumes exist.  
`docker volume ls`

2. If you have more than a single volume then go ahead and clean up.  
`docker volume prune`

3. Now let's create a postgres container which auto-creates a volume if one is not provided.  
`docker run --rm -d postgres:11-alpine`

4. List what volumes exist again, has anything changed? Postgres is automatically creating an anonymous volume for us for data to persist but what happens if we stop that container and startup another instance of postgres?  
`docker run --rm -d postgres:11-alpine`  
`docker volume ls`

5. Was the existing volume reused? How do we solve this issue?

Named Volumes
--

1. Clean up the volumes created in the previous steps. (Cmon you know how to do this)  
Ok fine, `docker volume prune`

2. Lets create ourselves a __named volume__  
`docker volume create myvol1`

3. Now list the existing volumes  
`docker volume ls`

4. Lets inspect that __myvol1__ and get some more info about it  
`docker volume inspect myvol1`

5. What do we learn? Well most importantly we see the mountpoint under  
__**/var/lib/docker/volumes/myvol1/_data**__ , cool huh?

6. Alright, how do we solve the previous problem now that we created our own volume? Run  
`docker run --rm -d -v myvol1:/var/lib/postgresql/data postgres:11-alpine`

7. List available volumes, what happened now?

What's this look like in docker compose?



